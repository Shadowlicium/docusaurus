"use strict";(self.webpackChunkprojet_docu=self.webpackChunkprojet_docu||[]).push([[104],{705:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/prom-serv-9179528833eb3ed773cdf67da786c943.png"},3051:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"ADDS/supervision","title":"supervision","description":"Grafana ainsi que prometheus seront install\xe9s sur un debian 12 dans AWS avec la composition suivante :","source":"@site/docs/ADDS/supervision.md","sourceDirName":"ADDS","slug":"/ADDS/supervision","permalink":"/docusaurus/docs/ADDS/supervision","draft":false,"unlisted":false,"editUrl":"https://github.com/Shadowlicium/docusaurus/docs/ADDS/supervision.md","tags":[],"version":"current","frontMatter":{"sidebar_popsition":8},"sidebar":"tutorialSidebar","previous":{"title":"AWS","permalink":"/docusaurus/docs/ADDS/AWS"},"next":{"title":"Sch\xe9ma","permalink":"/docusaurus/docs/MDM/architecture"}}');var t=n(4848),o=n(8453);const a={sidebar_popsition:8},i=void 0,d={},c=[{value:"Installation grafana",id:"installation-grafana",level:3},{value:"Installation prometheus",id:"installation-prometheus",level:3}];function l(e){const s={br:"br",code:"code",h3:"h3",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"Grafana ainsi que prometheus seront install\xe9s sur un debian 12 dans AWS avec la composition suivante :"}),"\n",(0,t.jsxs)(s.p,{children:["CPU : 1",(0,t.jsx)(s.br,{}),"\n","RAM : 1 Go",(0,t.jsx)(s.br,{}),"\n","disk : 20 Go"]}),"\n",(0,t.jsx)(s.p,{children:"Grafana permettra de monitorer le serveur samba sur AWS"}),"\n",(0,t.jsx)(s.h3,{id:"installation-grafana",children:"Installation grafana"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:'sudo apt install -y apt-transport-https software-properties-common\nsudo wget -q -O /usr/share/keyrings/grafana.key https://packages.grafana.com/gpg.key\necho "deb [signed-by=/usr/share/keyrings/grafana.key] https://packages.grafana.com/oss/deb stable main" | sudo tee /etc/apt/sources.list.d/grafana.list\nsudo apt update\napt install grafana -y\n'})}),"\n",(0,t.jsx)(s.p,{children:"Activer grafana"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"systemctl enable grafana-server\nsystemctl start grafana-server\n"})}),"\n",(0,t.jsx)(s.h3,{id:"installation-prometheus",children:"Installation prometheus"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"wget https://github.com/prometheus/prometheus/releases/download/v2.51.2/prometheus-2.51.2.linux-amd64.tar.gz\n"})}),"\n",(0,t.jsx)(s.p,{children:"Extraction du tar.gr"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"tar xvf prometheus-2.51.2.linux-amd64.tar.gz\n"})}),"\n",(0,t.jsx)(s.p,{children:"D\xe9placer les dossiers au bonnes endroits"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"cd prometheus-2.51.2.linux-amd64\nmv prometheus promtool /usr/local/bin/\nmv consoles/ console_libraries/ /etc/prometheus/\nmv prometheus.yml /etc/prometheus/\n"})}),"\n",(0,t.jsx)(s.p,{children:"Cr\xe9er le service systemd"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"nano /etc/systemd/system/prometheus.service\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:n(705).A+"",width:"1444",height:"533"})}),"\n",(0,t.jsx)(s.p,{children:"Installation du node de prometheus"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"wget https://github.com/prometheus/node_exporter/releases/download/v1.7.0/node_exporter-1.7.0.linux-amd64.tar.gz\ntar xvf node_exporter-1.7.0.linux-amd64.tar.gz\nmv node_exporter-1.7.0.linux-amd64/node_exporter /usr/local/bin/\n"})}),"\n",(0,t.jsx)(s.p,{children:"Cr\xe9er le service"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"nano /etc/systemd/system/node_exporter.service\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:n(6093).A+"",width:"1436",height:"474"})}),"\n",(0,t.jsx)(s.p,{children:"Initialisation"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"sudo systemctl daemon-reload\nsudo systemctl enable prometheus node_exporter\nsudo systemctl start prometheus node_exporter\n"})})]})}function p(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},6093:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/prom-node-39e7026f5f904c5808f910bc9334d605.png"},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>i});var r=n(6540);const t={},o=r.createContext(t);function a(e){const s=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);